


<html lang="en">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://static.npmjs.com/styles.e4e6d47ad2dd49fbf194.css" />

<h2><a id="user-content-face-recognition" class="deep-link" href="#face-recognition" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Node Face Recognition Api</h2>
<p><img src="https://user-images.githubusercontent.com/31125521/57297377-bfcdfd80-70cf-11e9-8afa-2044cb167bff.gif" alt="face-recognition" /></p>
<h2><a id="user-content-face-landmark-detection" class="deep-link" href="#face-landmark-detection" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Landmark Detection</h2>
<p><img src="https://user-images.githubusercontent.com/31125521/57297731-b1ccac80-70d0-11e9-9bd7-59d77f180322.jpg" alt="face_landmark_detection" /></p>
<h2><a id="user-content-face-expression-recognition" class="deep-link" href="#face-expression-recognition" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Expression Recognition</h2>
<p><img src="https://user-images.githubusercontent.com/31125521/50575270-f501d080-0dfb-11e9-9676-8f419efdade4.png" alt="preview_face-expression-recognition" /></p>
<h2><a id="user-content-age-estimation--gender-recognition" class="deep-link" href="#age-estimation--gender-recognition" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Age Estimation &amp; Gender Recognition</h2>
<p><img src="https://user-images.githubusercontent.com/31125521/57297736-b5603380-70d0-11e9-873d-8b6c7243eb64.jpg" alt="age_gender_recognition" /></p>
<p><a name="running-the-examples"></a></p>
<h1><a id="user-content-running-the-examples" class="deep-link" href="#running-the-examples" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the Examples</h1>
<p>Clone the repository:</p>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>git clone </span><span class="markup underline link hyperlink"><span>https://github.com/justadudewhohacks/face-api.js.git</span></span></span></div></pre><h2><a id="user-content-running-the-browser-examples" class="deep-link" href="#running-the-browser-examples" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the Browser Examples</h2>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>cd face-api.js/examples/examples-browser</span></span></div><div class="line"><span class="text"><span>npm i</span></span></div><div class="line"><span class="text"><span>npm start</span></span></div></pre><p>Browse to <a href="http://localhost:3000/" rel="nofollow">http://localhost:3000/</a>.</p>
<h2><a id="user-content-running-the-nodejs-examples" class="deep-link" href="#running-the-nodejs-examples" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running the Nodejs Examples</h2>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>cd face-api.js/examples/examples-nodejs</span></span></div><div class="line"><span class="text"><span>npm i</span></span></div></pre><p>Now run one of the examples using ts-node:</p>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>ts-node faceDetection.ts</span></span></div></pre><p>Or simply compile and run them with node:</p>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>tsc faceDetection.ts</span></span></div><div class="line"><span class="text"><span>node faceDetection.js</span></span></div></pre><p><a name="face-api.js-for-the-browser"></a></p>
<h1><a id="user-content-face-apijs-for-the-browser" class="deep-link" href="#face-apijs-for-the-browser" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>face-api.js for the Browser</h1>
<p>Simply include the latest script from <a href="https://github.com/justadudewhohacks/face-api.js/tree/master/dist" rel="nofollow">dist/face-api.js</a>.</p>
<p>Or install it via npm:</p>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>npm i face-api.js</span></span></div></pre><p><a name="face-api.js-for-nodejs"></a></p>
<h1><a id="user-content-face-apijs-for-nodejs" class="deep-link" href="#face-apijs-for-nodejs" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>face-api.js for Nodejs</h1>
<p>We can use the equivalent API in a nodejs environment by polyfilling some browser specifics, such as HTMLImageElement, HTMLCanvasElement and ImageData. The easiest way to do so is by installing the node-canvas package.</p>
<p>Alternatively you can simply construct your own tensors from image data and pass tensors as inputs to the API.</p>
<p>Furthermore you want to install @tensorflow/tfjs-node (not required, but highly recommended), which speeds things up drastically by compiling and binding to the native Tensorflow C++ library:</p>
<pre class="editor editor-colors"><div class="line"><span class="text"><span>npm i face-api.js canvas @tensorflow/tfjs-node</span></span></div></pre><p>Now we simply monkey patch the environment to use the polyfills:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> import nodejs bindings to native tensorflow,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> not required, but will speed up things drastically (python required)</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>@tensorflow/tfjs-node</span><span class="punctuation definition string end js"><span>'</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> implements nodejs wrappers for HTMLCanvasElement, HTMLImageElement, ImageData</span></span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span> </span><span class="variable language js"><span>*</span></span><span> </span><span class="keyword control js"><span>as</span></span><span> </span><span class="variable other js"><span>canvas</span></span><span> </span><span class="keyword control js"><span>from</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>canvas</span><span class="punctuation definition string end js"><span>'</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="meta import js"><span class="keyword control js"><span>import</span></span><span> </span><span class="variable language js"><span>*</span></span><span> </span><span class="keyword control js"><span>as</span></span><span> </span><span class="variable other js"><span>faceapi</span></span><span> </span><span class="keyword control js"><span>from</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>face-api.js</span><span class="punctuation definition string end js"><span>'</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> patch nodejs environment, we need to provide an implementation of</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> HTMLCanvasElement and HTMLImageElement</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="meta brace curly js"><span>{</span></span><span> </span><span class="constant other js"><span>Canvas</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant other js"><span>Image</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant other js"><span>ImageData</span></span><span> </span><span class="meta brace curly js"><span>}</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> canvas</span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>env</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>monkeyPatch</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span> Canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> Image</span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="support class dom js"><span>ImageData</span></span><span> </span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p><a name="getting-started"></a></p>
<h1><a id="user-content-getting-started" class="deep-link" href="#getting-started" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h1>
<p><a name="getting-started-loading-models"></a></p>
<h2><a id="user-content-loading-the-models" class="deep-link" href="#loading-the-models" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Loading the Models</h2>
<p>All global neural network instances are exported via faceapi.nets:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="entity name type object console js"><span>console</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>nets</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> ageGenderNet</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> faceExpressionNet</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> faceLandmark68Net</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> faceLandmark68TinyNet</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> faceRecognitionNet</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> ssdMobilenetv1</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> tinyFaceDetector</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> tinyYolov2</span></span></span></div></pre><p>To load a model, you have to provide the corresponding manifest.json file as well as the model weight files (shards) as assets. Simply copy them to your public or assets folder. The manifest.json and shard files of a model have to be located in the same directory / accessible under the same route.</p>
<p>Assuming the models reside in <strong>public/models</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>nets</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>ssdMobilenetv1</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>loadFromUri</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/models</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> accordingly for the other models:</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> await faceapi.nets.faceLandmark68Net.loadFromUri('/models')</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> await faceapi.nets.faceRecognitionNet.loadFromUri('/models')</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> ...</span></span></span></div></pre><p>In a nodejs environment you can furthermore load the models directly from disk:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>nets</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>ssdMobilenetv1</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>loadFromDisk</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>./models</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can also load the model from a tf.NamedTensorMap:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>nets</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>ssdMobilenetv1</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>loadFromWeightMap</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>weightMap</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Alternatively, you can also create own instances of the neural nets:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>net</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>SsdMobilenetv1</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>net</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>loadFromUri</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/models</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can also load the weights as a Float32Array (in case you want to use the uncompressed models):</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> using fetch</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>net</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>load</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>fetchNetWeights</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/models/face_detection_model.weights</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> using axios</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>res</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>axios</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>get</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/models/face_detection_model.weights</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="meta brace curly js"><span>{</span></span><span> responseType</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>arraybuffer</span><span class="punctuation definition string end js"><span>'</span></span></span><span> </span><span class="meta brace curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>weights</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>Float32Array</span></span></span><span class="meta brace round js"><span>(</span></span><span class="variable other object js"><span>res</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support variable dom js"><span>data</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>net</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>load</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>weights</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p><a name="getting-high-level-api"></a></p>
<h2><a id="user-content-high-level-api" class="deep-link" href="#high-level-api" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>High Level API</h2>
<p>In the following <strong>input</strong> can be an HTML img, video or canvas element or the id of that element.</p>
<pre class="editor editor-colors"><div class="line"><span class="text html"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>img</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myImg</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>images/example.png</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span> /&gt;</span></span></span></span></div><div class="line"><span class="text html"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>video</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myVideo</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>media/example.mp4</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span> /</span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>canvas</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myCanvas</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> /</span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>input</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myImg</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> const input = document.getElementById('myVideo')</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> const input = document.getElementById('myCanvas')</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> or simply:</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> const input = 'myImg'</span></span></span></div></pre><h3><a id="user-content-detecting-faces" class="deep-link" href="#detecting-faces" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detecting Faces</h3>
<p>Detect all faces in an image. Returns <strong>Array&lt;<a href="#interface-face-detection" rel="nofollow">FaceDetection</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score in an image. Returns <strong><a href="#interface-face-detection" rel="nofollow">FaceDetection</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detection</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>By default <strong>detectAllFaces</strong> and <strong>detectSingleFace</strong> utilize the SSD Mobilenet V1 Face Detector. You can specify the face detector by passing the corresponding options object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections1</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>SsdMobilenetv1Options</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections2</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>TinyFaceDetectorOptions</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can tune the options of each face detector as shown <a href="#getting-started-face-detection-options" rel="nofollow">here</a>.</p>
<h3><a id="user-content-detecting-68-face-landmark-points" class="deep-link" href="#detecting-68-face-landmark-points" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detecting 68 Face Landmark Points</h3>
<p><strong>After face detection, we can furthermore predict the facial landmarks for each detected face as follows:</strong></p>
<p>Detect all faces in an image + computes 68 Point Face Landmarks for each detected face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithLandmarks</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score in an image + computes 68 Point Face Landmarks for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionWithLandmarks</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can also specify to use the tiny model instead of the default model:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>useTinyModel</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="constant language boolean true js"><span>true</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithLandmarks</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>useTinyModel</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-computing-face-descriptors" class="deep-link" href="#computing-face-descriptors" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Computing Face Descriptors</h3>
<p><strong>After face detection and facial landmark prediction the face descriptors for each face can be computed as follows:</strong></p>
<p>Detect all faces in an image + compute 68 Point Face Landmarks for each detected face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithFaceDescriptor&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>results</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score in an image + compute 68 Point Face Landmarks and face descriptor for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithFaceDescriptor&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>result</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-recognizing-face-expressions" class="deep-link" href="#recognizing-face-expressions" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recognizing Face Expressions</h3>
<p><strong>Face expression recognition can be performed for detected faces as follows:</strong></p>
<p>Detect all faces in an image + recognize face expressions of each face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithFaceExpressions&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithExpressions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score in an image + recognize the face expressions for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithFaceExpressions&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionWithExpressions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p><strong>You can also skip .withFaceLandmarks(), which will skip the face alignment step (less stable accuracy):</strong></p>
<p>Detect all faces without face alignment + recognize face expressions of each face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithFaceExpressions&lt;WithFaceDetection&lt;{}&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithExpressions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score without face alignment + recognize the face expression for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithFaceExpressions&lt;WithFaceDetection&lt;{}&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionWithExpressions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-age-estimation-and-gender-recognition" class="deep-link" href="#age-estimation-and-gender-recognition" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Age Estimation and Gender Recognition</h3>
<p><strong>Age estimation and gender recognition from detected faces can be done as follows:</strong></p>
<p>Detect all faces in an image + estimate age and recognize gender of each face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithAge&lt;WithGender&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithAgeAndGender</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score in an image  + estimate age and recognize gender for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithAge&lt;WithGender&lt;WithFaceLandmarks&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionWithAgeAndGender</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p><strong>You can also skip .withFaceLandmarks(), which will skip the face alignment step (less stable accuracy):</strong></p>
<p>Detect all faces without face alignment + estimate age and recognize gender of each face. Returns <strong>Array&lt;<a href="#getting-started-utility-classes" rel="nofollow">WithAge&lt;WithGender&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a>&gt;</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithAgeAndGender</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>Detect the face with the highest confidence score without face alignment + estimate age and recognize gender for that face. Returns <strong><a href="#getting-started-utility-classes" rel="nofollow">WithAge&lt;WithGender&lt;WithFaceDetection&lt;{}&gt;&gt;&gt;</a> | undefined</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionWithAgeAndGender</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-composition-of-tasks" class="deep-link" href="#composition-of-tasks" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composition of Tasks</h3>
<p><strong>Tasks can be composed as follows:</strong></p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> all faces</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> single face</span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withAgeAndGender</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-face-recognition-by-matching-descriptors" class="deep-link" href="#face-recognition-by-matching-descriptors" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Recognition by Matching Descriptors</h3>
<p>To perform face recognition, one can use faceapi.FaceMatcher to compare reference face descriptors to query face descriptors.</p>
<p>First, we initialize the FaceMatcher with the reference data, for example we can simply detect faces in a <strong>referenceImage</strong> and match the descriptors of the detected faces to faces of subsequent images:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>results</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> faceapi</span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>referenceImage</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>if</span></span><span> </span><span class="meta brace round js"><span>(</span></span><span class="keyword operator logical js"><span>!</span></span><span class="variable other object js"><span>results</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support variable js"><span>length</span></span><span class="meta brace round js"><span>)</span></span><span> </span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="keyword control js"><span>return</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> create FaceMatcher with automatically assigned labels</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> from the detection results for the reference image</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>faceMatcher</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>FaceMatcher</span></span></span><span class="meta brace round js"><span>(</span></span><span>results</span><span class="meta brace round js"><span>)</span></span></span></div></pre><p>Now we can recognize a persons face shown in <strong>queryImage1</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>singleResult</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> faceapi</span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectSingleFace</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>queryImage1</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="keyword control js"><span>if</span></span><span> </span><span class="meta brace round js"><span>(</span></span><span>singleResult</span><span class="meta brace round js"><span>)</span></span><span> </span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>bestMatch</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceMatcher</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>findBestMatch</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable other object js"><span>singleResult</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>descriptor</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="entity name type object console js"><span>console</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable other object js"><span>bestMatch</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toString</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre><p>Or we can recognize all faces shown in <strong>queryImage2</strong>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>results</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> faceapi</span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>queryImage2</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceDescriptors</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>results</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>forEach</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta function js"><span class="meta js"><span class="variable function js"><span>fd</span></span></span><span> </span><span class="storage type function js"><span>=&gt;</span></span></span><span> </span><span class="punctuation definition function begin curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>  </span><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>bestMatch</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceMatcher</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>findBestMatch</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable other object js"><span>fd</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>descriptor</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span>  </span><span class="entity name type object console js"><span>console</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="variable other object js"><span>bestMatch</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toString</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="meta js"><span class="punctuation definition function end curly js"><span>}</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can also create labeled reference descriptors as follows:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>labeledDescriptors</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>LabeledFaceDescriptors</span></span></span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>    </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>obama</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>    </span><span class="meta brace square js"><span>[</span></span><span>descriptorObama1</span><span class="meta delimiter object comma js"><span>,</span></span><span> descriptorObama2</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>LabeledFaceDescriptors</span></span></span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>    </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>trump</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>    </span><span class="meta brace square js"><span>[</span></span><span>descriptorTrump</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>faceMatcher</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>FaceMatcher</span></span></span><span class="meta brace round js"><span>(</span></span><span>labeledDescriptors</span><span class="meta brace round js"><span>)</span></span></span></div></pre><p><a name="getting-started-displaying-detection-results"></a></p>
<h2><a id="user-content-displaying-detection-results" class="deep-link" href="#displaying-detection-results" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Displaying Detection Results</h2>
<p>Preparing the overlay canvas:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>displaySize</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace curly js"><span>{</span></span><span> width</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="variable other object js"><span>input</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support variable dom js"><span>width</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> height</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="variable other object js"><span>input</span></span><span class="meta delimiter period js"><span>.</span></span><span class="support variable dom js"><span>height</span></span><span> </span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> resize the overlay canvas to the input dimensions</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>canvas</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>overlay</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>matchDimensions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> displaySize</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>face-api.js predefines some highlevel drawing functions, which you can utilize:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment block js"><span class="punctuation definition comment js"><span>/*</span></span><span> Display detected face bounding boxes </span><span class="punctuation definition comment js"><span>*/</span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> resize the detected boxes in case your displayed image has a different size than the original</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>resizedDetections</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>resizeResults</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>detections</span><span class="meta delimiter object comma js"><span>,</span></span><span> displaySize</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> draw detections into the canvas</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>draw</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>drawDetections</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> resizedDetections</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment block js"><span class="punctuation definition comment js"><span>/*</span></span><span> Display face landmarks </span><span class="punctuation definition comment js"><span>*/</span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithLandmarks</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> faceapi</span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> resize the detected boxes and landmarks in case your displayed image has a different size than the original</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>resizedResults</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>resizeResults</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>detectionsWithLandmarks</span><span class="meta delimiter object comma js"><span>,</span></span><span> displaySize</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> draw detections into the canvas</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>draw</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>drawDetections</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> resizedResults</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> draw the landmarks into the canvas</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>draw</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>drawFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> resizedResults</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment block js"><span class="punctuation definition comment js"><span>/*</span></span><span> Display face expression results </span><span class="punctuation definition comment js"><span>*/</span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detectionsWithExpressions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> faceapi</span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectAllFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>withFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> resize the detected boxes and landmarks in case your displayed image has a different size than the original</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>resizedResults</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>resizeResults</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>detectionsWithExpressions</span><span class="meta delimiter object comma js"><span>,</span></span><span> displaySize</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> draw detections into the canvas</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>draw</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>drawDetections</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> resizedResults</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> draw a textbox displaying the face expressions with minimum probability into the canvas</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>minProbability</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="constant numeric decimal js"><span>0</span><span class="meta delimiter decimal period js"><span>.</span></span><span>05</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>faceapi</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other object js"><span>draw</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>drawFaceExpressions</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>canvas</span><span class="meta delimiter object comma js"><span>,</span></span><span> resizedResults</span><span class="meta delimiter object comma js"><span>,</span></span><span> minProbability</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>You can also draw boxes with custom text (<a href="https://github.com/justadudewhohacks/tfjs-image-recognition-base/blob/master/src/draw/DrawBox.ts" rel="nofollow">DrawBox</a>):</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>box</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace curly js"><span>{</span></span><span> x</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>50</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> y</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>50</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> width</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>100</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> height</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>100</span></span><span> </span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> see DrawBoxOptions below</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>drawOptions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>  label</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>Hello I am a box!</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>  lineWidth</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>2</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>drawBox</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>draw</span><span class="meta delimiter period js"><span>.</span></span><span>DrawBox</span></span></span><span class="meta brace round js"><span>(</span></span><span>box</span><span class="meta delimiter object comma js"><span>,</span></span><span> drawOptions</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>drawBox</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>draw</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myCanvas</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>DrawBox drawing options:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>IDrawBoxOptions</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>boxColor</span></span><span>?: </span><span class="variable other module js"><span>string</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>lineWidth</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>drawLabelOptions</span></span><span>?: </span><span class="variable other module js"><span>IDrawTextFieldOptions</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>label</span></span><span>?: </span><span class="variable other module js"><span>string</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><p>Finally you can draw custom text fields (<a href="https://github.com/justadudewhohacks/tfjs-image-recognition-base/blob/master/src/draw/DrawTextField.ts" rel="nofollow">DrawTextField</a>):</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>text</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>This is a textline!</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>This is another textline!</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>anchor</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace curly js"><span>{</span></span><span> x</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>200</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> y</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>200</span></span><span> </span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> see DrawTextField below</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>drawOptions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>  anchorPosition</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>TOP_LEFT</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>  backgroundColor</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>rgba(0, 0, 0, 0.5)</span><span class="punctuation definition string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>drawBox</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>draw</span><span class="meta delimiter period js"><span>.</span></span><span>DrawTextField</span></span></span><span class="meta brace round js"><span>(</span></span><span>text</span><span class="meta delimiter object comma js"><span>,</span></span><span> anchor</span><span class="meta delimiter object comma js"><span>,</span></span><span> drawOptions</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>drawBox</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>draw</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myCanvas</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p>DrawTextField drawing options:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>IDrawTextFieldOptions</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>anchorPosition</span></span><span>?: </span><span class="variable other module js"><span>AnchorPosition</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>backgroundColor</span></span><span>?: </span><span class="variable other module js"><span>string</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>fontColor</span></span><span>?: </span><span class="variable other module js"><span>string</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>fontSize</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>fontStyle</span></span><span>?: </span><span class="variable other module js"><span>string</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>padding</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>enum</span></span><span> </span><span class="variable other module js"><span>AnchorPosition</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>TOP_LEFT</span></span><span> = '</span><span class="variable other module js"><span>TOP_LEFT</span></span><span>'</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>TOP_RIGHT</span></span><span> = '</span><span class="variable other module js"><span>TOP_RIGHT</span></span><span>'</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>BOTTOM_LEFT</span></span><span> = '</span><span class="variable other module js"><span>BOTTOM_LEFT</span></span><span>'</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>BOTTOM_RIGHT</span></span><span> = '</span><span class="variable other module js"><span>BOTTOM_RIGHT</span></span><span>'</span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><p><a name="getting-started-face-detection-options"></a></p>
<h2><a id="user-content-face-detection-options" class="deep-link" href="#face-detection-options" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Detection Options</h2>
<h3><a id="user-content-ssdmobilenetv1options" class="deep-link" href="#ssdmobilenetv1options" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SsdMobilenetv1Options</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>ISsdMobilenetv1Options</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> minimum confidence threshold</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> default: 0.5</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>minConfidence</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span> </span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> maximum number of faces to return</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> default: 100</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>maxResults</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> example</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>options</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>SsdMobilenetv1Options</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span> minConfidence</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>0</span><span class="meta delimiter decimal period js"><span>.</span></span><span>8</span></span><span> </span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre><h3><a id="user-content-tinyfacedetectoroptions" class="deep-link" href="#tinyfacedetectoroptions" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TinyFaceDetectorOptions</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>ITinyFaceDetectorOptions</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> size at which image is processed, the smaller the faster,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> but less precise in detecting smaller faces, must be divisible</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> by 32, common sizes are 128, 160, 224, 320, 416, 512, 608,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> for face tracking via webcam I would recommend using smaller sizes,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> e.g. 128, 160, for detecting smaller faces use larger sizes, e.g. 512, 608</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> default: 416</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>inputSize</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span> </span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> minimum confidence threshold</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> default: 0.5</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>scoreThreshold</span></span><span>?: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> example</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>options</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>TinyFaceDetectorOptions</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span> inputSize</span><span class="keyword operator assignment js"><span>:</span></span><span> </span><span class="constant numeric decimal js"><span>320</span></span><span> </span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre><p><a name="getting-started-utility-classes"></a></p>
<h2><a id="user-content-utility-classes" class="deep-link" href="#utility-classes" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Utility Classes</h2>
<h3><a id="user-content-ibox" class="deep-link" href="#ibox" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IBox</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>IBox</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>x</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>y</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>width</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>height</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-ifacedetection" class="deep-link" href="#ifacedetection" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IFaceDetection</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>IFaceDetection</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>score</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>box</span></span><span>: </span><span class="variable other module js"><span>Box</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-ifacelandmarks" class="deep-link" href="#ifacelandmarks" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IFaceLandmarks</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>interface</span></span><span> </span><span class="variable other module js"><span>IFaceLandmarks</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>positions</span></span><span>: </span><span class="variable other module js"><span>Point</span></span><span>[]</span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>shift</span></span><span>: </span><span class="variable other module js"><span>Point</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withfacedetection" class="deep-link" href="#withfacedetection" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithFaceDetection</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithFaceDetection</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>detection</span></span><span>: </span><span class="variable other module js"><span>FaceDetection</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withfacelandmarks" class="deep-link" href="#withfacelandmarks" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithFaceLandmarks</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithFaceLandmarks</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>unshiftedLandmarks</span></span><span>: </span><span class="variable other module js"><span>FaceLandmarks</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>landmarks</span></span><span>: </span><span class="variable other module js"><span>FaceLandmarks</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>alignedRect</span></span><span>: </span><span class="variable other module js"><span>FaceDetection</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withfacedescriptor" class="deep-link" href="#withfacedescriptor" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithFaceDescriptor</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithFaceDescriptor</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>descriptor</span></span><span>: </span><span class="variable other module js"><span>Float32Array</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withfaceexpressions" class="deep-link" href="#withfaceexpressions" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithFaceExpressions</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithFaceExpressions</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>expressions</span></span><span>: </span><span class="variable other module js"><span>FaceExpressions</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withage" class="deep-link" href="#withage" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithAge</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithAge</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>age</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><h3><a id="user-content-withgender" class="deep-link" href="#withgender" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WithGender</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>type</span></span><span> </span><span class="variable other module js"><span>WithGender</span></span><span class="keyword operator comparison js"><span>&lt;</span></span><span class="variable other module js"><span>TSource</span></span><span class="keyword operator comparison js"><span>&gt;</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other module js"><span>TSource</span></span><span> </span><span class="keyword operator js"><span>&amp;</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>gender</span></span><span>: </span><span class="variable other module js"><span>Gender</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>genderProbability</span></span><span>: </span><span class="variable other module js"><span>number</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="keyword control js"><span>export</span></span><span> </span><span class="variable other module js"><span>enum</span></span><span> </span><span class="variable other module js"><span>Gender</span></span><span> </span><span class="punctuation definition begin js"><span>{</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>FEMALE</span></span><span> = '</span><span class="variable other module js"><span>female</span></span><span>'</span><span class="meta delimiter object comma js"><span>,</span></span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span>  </span><span class="variable other module js"><span>MALE</span></span><span> = '</span><span class="variable other module js"><span>male</span></span><span>'</span></span></span></div><div class="line"><span class="source js"><span class="meta js"><span class="punctuation definition end js"><span>}</span></span></span></span></div></pre><p><a name="getting-started-other-useful-utility"></a></p>
<h2><a id="user-content-other-useful-utility" class="deep-link" href="#other-useful-utility" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other Useful Utility</h2>
<h3><a id="user-content-using-the-low-level-api" class="deep-link" href="#using-the-low-level-api" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using the Low Level API</h3>
<p>Instead of using the high level API, you can directly use the forward methods of each neural network:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections1</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>ssdMobilenetv1</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="meta delimiter object comma js"><span>,</span></span><span> options</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>detections2</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>tinyFaceDetector</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="meta delimiter object comma js"><span>,</span></span><span> options</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>landmarks1</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectFaceLandmarks</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>faceImage</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>landmarks2</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>detectFaceLandmarksTiny</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>faceImage</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>descriptor</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>computeFaceDescriptor</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>alignedFaceImage</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-extracting-a-canvas-for-an-image-region" class="deep-link" href="#extracting-a-canvas-for-an-image-region" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extracting a Canvas for an Image Region</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>regionsToExtract</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="meta class instance constructor js"><span class="keyword operator js"><span>new</span></span><span> </span><span class="entity name type instance js"><span>faceapi</span><span class="meta delimiter period js"><span>.</span></span><span>Rect</span></span></span><span class="meta brace round js"><span>(</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant numeric decimal js"><span>100</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant numeric decimal js"><span>100</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> actually extractFaces is meant to extract face regions from bounding boxes</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> but you can also use it to extract any other region</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>canvases</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>extractFaces</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>input</span><span class="meta delimiter object comma js"><span>,</span></span><span> regionsToExtract</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-euclidean-distance" class="deep-link" href="#euclidean-distance" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Euclidean Distance</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> ment to be used for computing the euclidean distance between two face descriptors</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>dist</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>euclideanDistance</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span><span> </span><span class="constant numeric decimal js"><span>10</span></span><span class="meta brace square js"><span>]</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="entity name type object console js"><span>console</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>dist</span><span class="punctuation definition end round js"><span>)</span></span></span></span><span> </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> 10</span></span></span></div></pre><h3><a id="user-content-retrieve-the-face-landmark-points-and-contours" class="deep-link" href="#retrieve-the-face-landmark-points-and-contours" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Retrieve the Face Landmark Points and Contours</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>landmarkPositions</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>positions</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> or get the positions of individual contours,</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> only available for 68 point face ladnamrks (FaceLandmarks68)</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>jawOutline</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getJawOutline</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>nose</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getNose</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>mouth</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getMouth</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>leftEye</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getLeftEye</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>rightEye</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getRightEye</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>leftEyeBbrow</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getLeftEyeBrow</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>rightEyeBrow</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>landmarks</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>getRightEyeBrow</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-fetch-and-display-images-from-an-url" class="deep-link" href="#fetch-and-display-images-from-an-url" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fetch and Display Images from an URL</h3>
<pre class="editor editor-colors"><div class="line"><span class="text html"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>img</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myImg</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>image</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>fetchImage</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/images/example.png</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="entity name type object console js"><span>console</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>image </span><span class="keyword operator js"><span>instanceof</span></span><span> </span><span class="support class dom js"><span>HTMLImageElement</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span> </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> true</span></span></span></div><div class="line"><span class="source js"><span> </span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> displaying the fetched image content</span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>myImg</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myImg</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="variable other object js"><span>myImg</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>src</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>image</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>src</span></span></span></div></pre><h3><a id="user-content-fetching-json" class="deep-link" href="#fetching-json" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fetching JSON</h3>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>json</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>fetchJson</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>/files/example.json</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><h3><a id="user-content-creating-an-image-picker" class="deep-link" href="#creating-an-image-picker" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an Image Picker</h3>
<pre class="editor editor-colors"><div class="line"><span class="text html"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>img</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myImg</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>input</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myFileUpload</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>type</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>file</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span> </span><span class="entity other attribute-name html"><span>onchange</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>uploadImage()</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span> </span><span class="entity other attribute-name html"><span>accept</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>.jpg, .jpeg, .png</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage modifier js"><span>async</span></span><span> </span><span class="storage type function js"><span>function</span></span><span> </span><span class="entity name function js"><span>uploadImage</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span> </span><span class="punctuation definition function begin curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>imgFile</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myFileUpload</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>files</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric decimal js"><span>0</span></span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span> create an HTMLImageElement from a Blob</span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>img</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="keyword control js"><span>await</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>bufferToImage</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span>imgFile</span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span>  </span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myImg</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>src</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>img</span></span><span class="meta delimiter period js"><span>.</span></span><span class="variable other js"><span>src</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function end curly js"><span>}</span></span></span></div></pre><h3><a id="user-content-creating-a-canvas-element-from-an-image-or-video-element" class="deep-link" href="#creating-a-canvas-element-from-an-image-or-video-element" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Canvas Element from an Image or Video Element</h3>
<pre class="editor editor-colors"><div class="line"><span class="text html"><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>img</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myImg</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>images/example.png</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span> /&gt;</span></span></span></span></div><div class="line"><span class="text html"><span class="meta tag other html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag other html"><span>video</span></span><span> </span><span class="meta id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>myVideo</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span> </span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>media/example.mp4</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span> /</span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>canvas1</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>createCanvasFromMedia</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myImg</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div><div class="line"><span class="source js"><span class="storage type js"><span>const</span></span><span> </span><span class="constant other js"><span>canvas2</span></span><span> </span><span class="keyword operator assignment js"><span>=</span></span><span> </span><span class="variable other object js"><span>faceapi</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>createCanvasFromMedia</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="support variable dom js"><span>document</span></span><span class="meta js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta js"><span class="punctuation definition begin round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>'</span></span><span>myVideo</span><span class="punctuation definition string end js"><span>'</span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span><span class="punctuation definition end round js"><span>)</span></span></span></span></span></div></pre><p><a name="models"></a></p>
<h1><a id="user-content-available-models" class="deep-link" href="#available-models" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Available Models</h1>
<p><a name="models-face-detection"></a></p>
<h2><a id="user-content-face-detection-models" class="deep-link" href="#face-detection-models" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Detection Models</h2>
<h3><a id="user-content-ssd-mobilenet-v1" class="deep-link" href="#ssd-mobilenet-v1" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SSD Mobilenet V1</h3>
<p>For face detection, this project implements a SSD (Single Shot Multibox Detector) based on MobileNetV1. The neural net will compute the locations of each face in an image and will return the bounding boxes together with it's probability for each face. This face detector is aiming towards obtaining high accuracy in detecting face bounding boxes instead of low inference time. The size of the quantized model is about 5.4 MB (<strong>ssd_mobilenetv1_model</strong>).</p>
<p>The face detection model has been trained on the <a href="http://mmlab.ie.cuhk.edu.hk/projects/WIDERFace/" rel="nofollow">WIDERFACE dataset</a> and the weights are provided by <a href="https://github.com/yeephycho" rel="nofollow">yeephycho</a> in <a href="https://github.com/yeephycho/tensorflow-face-detection" rel="nofollow">this</a> repo.</p>
<h3><a id="user-content-tiny-face-detector" class="deep-link" href="#tiny-face-detector" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tiny Face Detector</h3>
<p>The Tiny Face Detector is a very performant, realtime face detector, which is much faster, smaller and less resource consuming compared to the SSD Mobilenet V1 face detector, in return it performs slightly less well on detecting small faces. This model is extremely mobile and web friendly, thus it should be your GO-TO face detector on mobile devices and resource limited clients. The size of the quantized model is only 190 KB (<strong>tiny_face_detector_model</strong>).</p>
<p>The face detector has been trained on a custom dataset of ~14K images labeled with bounding boxes. Furthermore the model has been trained to predict bounding boxes, which entirely cover facial feature points, thus it in general produces better results in combination with subsequent face landmark detection than SSD Mobilenet V1.</p>
<p>This model is basically an even tinier version of Tiny Yolo V2, replacing the regular convolutions of Yolo with depthwise separable convolutions. Yolo is fully convolutional, thus can easily adapt to different input image sizes to trade off accuracy for performance (inference time).</p>
<p><a name="models-face-landmark-detection"></a></p>
<h2><a id="user-content-68-point-face-landmark-detection-models" class="deep-link" href="#68-point-face-landmark-detection-models" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>68 Point Face Landmark Detection Models</h2>
<p>This package implements a very lightweight and fast, yet accurate 68 point face landmark detector. The default model has a size of only 350kb (<strong>face_landmark_68_model</strong>) and the tiny model is only 80kb (<strong>face_landmark_68_tiny_model</strong>). Both models employ the ideas of depthwise separable convolutions as well as densely connected blocks. The models have been trained on a dataset of ~35k face images labeled with 68 face landmark points.</p>
<p><a name="models-face-recognition"></a></p>
<h2><a id="user-content-face-recognition-model" class="deep-link" href="#face-recognition-model" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Recognition Model</h2>
<p>For face recognition, a ResNet-34 like architecture is implemented to compute a face descriptor (a feature vector with 128 values) from any given face image, which is used to describe the characteristics of a persons face. The model is <strong>not</strong> limited to the set of faces used for training, meaning you can use it for face recognition of any person, for example yourself. You can determine the similarity of two arbitrary faces by comparing their face descriptors, for example by computing the euclidean distance or using any other classifier of your choice.</p>
<p>The neural net is equivalent to the <strong>FaceRecognizerNet</strong> used in <a href="https://github.com/justadudewhohacks/face-recognition.js" rel="nofollow">face-recognition.js</a> and the net used in the <a href="https://github.com/davisking/dlib/blob/master/examples/dnn_face_recognition_ex.cpp" rel="nofollow">dlib</a> face recognition example. The weights have been trained by <a href="https://github.com/davisking" rel="nofollow">davisking</a> and the model achieves a prediction accuracy of 99.38% on the LFW (Labeled Faces in the Wild) benchmark for face recognition.</p>
<p>The size of the quantized model is roughly 6.2 MB (<strong>face_recognition_model</strong>).</p>
<p><a name="models-face-expression-recognition"></a></p>
<h2><a id="user-content-face-expression-recognition-model" class="deep-link" href="#face-expression-recognition-model" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Face Expression Recognition Model</h2>
<p>The face expression recognition model is lightweight, fast and provides reasonable accuracy. The model has a size of roughly 310kb and it employs depthwise separable convolutions and densely connected blocks. It has been trained on a variety of images from publicly available datasets as well as images scraped from the web. Note, that wearing glasses might decrease the accuracy of the prediction results.</p>
<p><a name="models-age-and-gender-recognition"></a></p>
<h2><a id="user-content-age-and-gender-recognition-model" class="deep-link" href="#age-and-gender-recognition-model" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Age and Gender Recognition Model</h2>
<p>The age and gender recognition model is a multitask network, which employs a feature extraction layer, an age regression layer and a gender classifier. The model has a size of roughly 420kb and the feature extractor employs a tinier but very similar architecture to Xception.</p>
<p>This model has been trained and tested on the following databases with an 80/20 train/test split each: UTK, FGNET, Chalearn, Wiki, IMDB*, CACD*, MegaAge, MegaAge-Asian. The <code>*</code> indicates, that these databases have been algorithmically cleaned up, since the initial databases are very noisy.</p>
<h3><a id="user-content-total-test-results" class="deep-link" href="#total-test-results" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Total Test Results</h3>
<p>Total MAE (Mean Age Error): <strong>4.54</strong></p>
<p>Total Gender Accuracy: <strong>95%</strong></p>
<h3><a id="user-content-test-results-for-each-database" class="deep-link" href="#test-results-for-each-database" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test results for each database</h3>
<p>The <code>-</code> indicates, that there are no gender labels available for these databases.</p>
<table>
<thead>
<tr>
<th>Database</th>
<th style="text-align:right;">UTK</th>
<th style="text-align:right;">FGNET</th>
<th style="text-align:right;">Chalearn</th>
<th style="text-align:right;">Wiki</th>
<th style="text-align:right;">IMDB*</th>
<th style="text-align:right;">CACD*</th>
<th style="text-align:right;">MegaAge</th>
<th style="text-align:right;">MegaAge-Asian</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAE</td>
<td style="text-align:right;">5.25</td>
<td style="text-align:right;">4.23</td>
<td style="text-align:right;">6.24</td>
<td style="text-align:right;">6.54</td>
<td style="text-align:right;">3.63</td>
<td style="text-align:right;">3.20</td>
<td style="text-align:right;">6.23</td>
<td style="text-align:right;">4.21</td>
</tr>
<tr>
<td>Gender Accuracy</td>
<td style="text-align:right;">0.93</td>
<td style="text-align:right;">-</td>
<td style="text-align:right;">0.94</td>
<td style="text-align:right;">0.95</td>
<td style="text-align:right;">-</td>
<td style="text-align:right;">0.97</td>
<td style="text-align:right;">-</td>
<td style="text-align:right;">-</td>
</tr>
</tbody>
</table>
<h3><a id="user-content-test-results-for-different-age-category-groups" class="deep-link" href="#test-results-for-different-age-category-groups" aria-hidden="true" rel="nofollow"><svg aria-hidden="true" class="deep-link-icon" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Test results for different age category groups</h3>
<table>
<thead>
<tr>
<th>Age Range</th>
<th style="text-align:right;">0 - 3</th>
<th style="text-align:right;">4 - 8</th>
<th style="text-align:right;">9 - 18</th>
<th style="text-align:right;">19 - 28</th>
<th style="text-align:right;">29 - 40</th>
<th style="text-align:right;">41 - 60</th>
<th style="text-align:right;">60 - 80</th>
<th style="text-align:right;">80+</th>
</tr>
</thead>
<tbody>
<tr>
<td>MAE</td>
<td style="text-align:right;">1.52</td>
<td style="text-align:right;">3.06</td>
<td style="text-align:right;">4.82</td>
<td style="text-align:right;">4.99</td>
<td style="text-align:right;">5.43</td>
<td style="text-align:right;">4.94</td>
<td style="text-align:right;">6.17</td>
<td style="text-align:right;">9.91</td>
</tr>
<tr>
<td>Gender Accuracy</td>
<td style="text-align:right;">0.69</td>
<td style="text-align:right;">0.80</td>
<td style="text-align:right;">0.88</td>
<td style="text-align:right;">0.96</td>
<td style="text-align:right;">0.97</td>
<td style="text-align:right;">0.97</td>
<td style="text-align:right;">0.96</td>
<td style="text-align:right;">0.9</td>
</tr>
</tbody>
</table>
</div></article></div><div class="pv4"><h2 id="user-content-keywords" class="a0dff0b1 mt2 pt2 mb3 pb3 f4 fw6 b--black-10">Keywords</h2><ul class="list pl0"><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:face">face</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:detection">detection</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:recognition">recognition</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:tensorflow">tensorflow</a></li><li class="dib mr2"><a class="_75a5f581 f4 fw6 fl db pv1 ma1 black-70 link hover-black animate" href="/search?q=keywords:tf">tf</a></li></ul></div></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-explore" aria-labelledby="package-tab-explore" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-admin" aria-labelledby="package-tab-admin" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-dependencies" aria-labelledby="package-tab-dependencies" role="tabpanel" data-attribute="hidden"></section><section class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-dependents" aria-labelledby="package-tab-dependents" role="tabpanel" data-attribute="hidden"></section><div class="e22ba268 ph2 ph0-ns ml0-ns mr3-ns black-80" id="tabpanel-versions" aria-labelledby="package-tab-versions" role="tabpanel" data-attribute="hidden"></div></span><span aria-live="polite"></span></div><div class="fdbf4038 w-third-l mt3 w-100 ph3 ph4-m pv3 pv0-l"><h3 class="c84e15be f5 mt2 pt2 mb0">Install</h3><p class="d767adf4 lh-copy truncate ph0 mb3 black-80 b5be2af6 f6 flex flex-row"><svg viewBox="0 0 12.32 9.33"><g><line class="st1" x1="7.6" y1="8.9" x2="7.6" y2="6.9"></line><rect width="1.9" height="1.9"></rect><rect x="1.9" y="1.9" width="1.9" height="1.9"></rect><rect x="3.7" y="3.7" width="1.9" height="1.9"></rect><rect x="1.9" y="5.6" width="1.9" height="1.9"></rect><rect y="7.5" width="1.9" height="1.9"></rect></g></svg><code class="flex-auto truncate db" title="Copy Command to Clipboard"><span role="button" tabindex="0">npm i <!-- -->face-api.js</span></code><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="copy" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"></path></svg></p><div><div><h3 class="c84e15be f5 mt2 pt2 mb0 _5cfc0900"><svg viewBox="0 0 7.22 11.76"><title>Downloads</title><g><polygon points="4.59 4.94 4.59 0 2.62 0 2.62 4.94 0 4.94 3.28 9.53 7.22 4.94 4.59 4.94"></polygon><rect x="0.11" y="10.76" width="7" height="1"></rect></g></svg>Weekly Downloads</h3><div class="_000ae427 flex flex-row-reverse items-end"><svg class="_418c4939 flex-none" width="200" height="40" stroke-width="3" stroke="#8956FF" fill="rgba(137, 86, 255, .2)"></svg><p class="_9ba9a726 f4 tl flex-auto fw6 black-80 ma0 pr2 pb1">12,461</p></div></div></div><div class="_702d723c dib w-50 bb b--black-10 pr2"><h3 class="c84e15be f5 mt2 pt2 mb0">Version</h3><p class="f2874b88 fw6 mb3 mt2 truncate black-80 f4">0.22.2</p></div><div class="_702d723c dib w-50 bb b--black-10 pr2"><h3 class="c84e15be f5 mt2 pt2 mb0">License</h3><p class="f2874b88 fw6 mb3 mt2 truncate black-80 f4">MIT</p></div><div class="_702d723c dib w-50 bb b--black-10 pr2"><h3 class="c84e15be f5 mt2 pt2 mb0">Unpacked Size</h3><p class="f2874b88 fw6 mb3 mt2 truncate black-80 f4">4.87 MB</p></div><div class="_702d723c dib w-50 bb b--black-10 pr2"><h3 class="c84e15be f5 mt2 pt2 mb0">Total Files</h3><p class="f2874b88 fw6 mb3 mt2 truncate black-80 f4">1136</p></div><div class="_702d723c dib w-50 bb b--black-10 pr2 w-100"><h3 class="c84e15be f5 mt2 pt2 mb0">Last publish</h3><p class="f2874b88 fw6 mb3 mt2 truncate black-80 f4"><time dateTime="2020-03-22T13:28:18.414Z" title="3/22/2020, 1:28:18 PM">2 years ago</time></p></div><div class="w-100"><h3 id="collaborators" class="c84e15be f5 mt2 pt2 mb0">Collaborators</h3><ul aria-labelledby="collaborators" class="list pl0 cf"><li class="_426b8533 fl dib mr2 mb2"><div><a href="/~justadudewhohacks"><img src="/npm-avatar/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdmF0YXJVUkwiOiJodHRwczovL3MuZ3JhdmF0YXIuY29tL2F2YXRhci9iYWE5YTI3YjIxMGJhZWUyYmEwZmRlMjkxZGFhMjM3Mz9zaXplPTEwMCZkZWZhdWx0PXJldHJvIn0.-CXsc55VU26UshU6h1t--kwTtunjG-gCZlv6L50nZj0" style="width:42px;height:42px;min-width:42px;border-radius:4%" alt="justadudewhohacks" title="justadudewhohacks"/></a></div></li></ul></div><div class="w-100"><a class="c37751f6 _24a1e9c7 dab9924c br2 pv2 ph3 fw5 f5 tc button button-reset pointer ma2 truncate ml0 no-underline mt2 dib w-100" rel="noopener noreferrer nofollow" href="https://runkit.com/npm/face-api.js"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="terminal" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M257.981 272.971L63.638 467.314c-9.373 9.373-24.569 9.373-33.941 0L7.029 444.647c-9.357-9.357-9.375-24.522-.04-33.901L161.011 256 6.99 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L257.981 239.03c9.373 9.372 9.373 24.568 0 33.941zM640 456v-32c0-13.255-10.745-24-24-24H312c-13.255 0-24 10.745-24 24v32c0 13.255 10.745 24 24 24h304c13.255 0 24-10.745 24-24z"></path></svg><strong>Try</strong> on RunKit</a></div><div class="_33c89934 flex flex-column-l items-start-l"><a class="_4a3f8f21 _24a1e9c7 dab9924c br2 pv2 ph3 fw5 f5 tc button button-reset pointer ma2 truncate ml0 no-underline mt2 dib w-100" href="/support?inquire=security&amp;security-inquire=malware&amp;package=face-api.js&amp;version=0.22.2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="flag" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"></path></svg><strong>Report</strong> malware</a></div></div></div></main><footer class="cd2827bb bt b--black-10 mt4"><div id="footer" class="center mw9 pa3 flex flex-column flex-wrap-m flex-row-ns"><div class="flex-auto pa4-ns pa3 w-100 w-10-l"><div class="_802b5507 pt3"><a target="_blank" title="npm repository" rel="noopener noreferrer nofollow" href="https://github.com/npm"><svg viewBox="0 0 27.23 27.23"><rect fill="#333333" width="27.23" height="27.23" rx="2"></rect><polygon fill="#fff" points="5.8 21.75 13.66 21.75 13.67 9.98 17.59 9.98 17.58 21.76 21.51 21.76 21.52 6.06 5.82 6.04 5.8 21.75"></polygon></svg></a></div><div class="_802b5507 pt3"><a target="_blank" title="GitHub" rel="noopener noreferrer nofollow" href="https://github.com"><svg aria-hidden="true" role="img" class="" viewBox="0 0 16 16" width="50" height="50" fill="black" style="display:inline-block;user-select:none;vertical-align:top"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></div></div><div class="flex-auto pa4-ns pa3 w-30-ns w-50-m"><a class="_3f7d964f" href="#header">Return to top of page</a><h3 class="_1b8c0a9f">Support</h3><ul class="list pl0"><li class="pv1"><a class="link" href="https://docs.npmjs.com">Help</a></li><li class="pv1"><a class="link" href="https://github.com/advisories">Advisories</a></li><li class="pv1"><a class="link" href="http://status.npmjs.org/">Status</a></li><li class="pv1"><a class="link" href="/support">Contact npm</a></li></ul></div><div class="flex-auto pa4-ns pa3 w-30-ns w-50-m"><h3 class="_1b8c0a9f">Company</h3><ul class="list pl0"><li class="pv1"><a class="link" href="/about">About</a></li><li class="pv1"><a class="link" href="https://github.blog/tag/npm/">Blog</a></li><li class="pv1"><a class="link" href="/press">Press</a></li></ul></div><div class="flex-auto pa4-ns pa3 w-30-ns w-50-m"><h3 class="_1b8c0a9f">Terms &amp; Policies</h3><ul class="list pl0"><li class="pv1"><a class="link" href="/policies/">Policies</a></li><li class="pv1"><a class="link" href="/policies/terms">Terms of Use</a></li><li class="pv1"><a class="link" href="/policies/conduct">Code of Conduct</a></li><li class="pv1"><a class="link" href="/policies/privacy">Privacy</a></li></ul></div></div></footer></div><div class="_8a62ca63 fixed top-0 left-0 z-999" style="opacity:0;transform:scaleX(1);-webkit-transform:scaleX(1);-moz-transform:scaleX(1)"></div>
  </body>
</html>
